<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>销售数据展示</title>
    <style>
        table { width: 50%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        .hidden { display: none; }
        .toggleDetails { cursor: pointer; color: blue; text-decoration: underline; }
    </style>
</head>
<body>

<h2 style="text-align:center;">平台销售数据</h2>

<table id="summaryTable">
    <thead>
    <tr>
        <th>平台</th>
        <th>总销量</th>
        <th>总销售额</th>
    </tr>
    </thead>
    <tbody>
    <!-- 数据将在这里动态插入 -->
    </tbody>
</table>

<script>
    const data = {
        "A_platform": {
            "total_sales": 5000,
            "total_revenue": 150000,
            "models": [
                {"model": "A1", "sales": 200, "revenue": 60000},
                {"model": "A2", "sales": 150, "revenue": 45000},
                {"model": "A3", "sales": 150, "revenue": 45000}
            ]
        },
        "B_platform": {
            "total_sales": 7000,
            "total_revenue": 210000,
            "models": [
                {"model": "B1", "sales": 3000, "revenue": 90000},
                {"model": "B2", "sales": 2000, "revenue": 60000},
                {"model": "B3", "sales": 2000, "revenue": 60000}
            ]
        }
    };

    const summaryTableBody = document.querySelector('#summaryTable tbody');
    for (const platform in data) {
        const row = document.createElement('tr');
        row.innerHTML = `<td class="toggleDetails">${platform}</td><td>${data[platform].total_sales}</td><td>${data[platform].total_revenue}</td>`;
        // 添加点击事件监听器到每个平台的单元格上
        row.querySelector('.toggleDetails').addEventListener('click', function() {
            showDetails(platform);
        });
        summaryTableBody.appendChild(row);
    }

    function showDetails(platformName) {
        let detailsRow = document.querySelector(`#details-${platformName}`);
        if (!detailsRow) {
            const detailsTable = document.createElement('table');
            detailsTable.id = `details-${platformName}`;
            detailsTable.style.width = '50%';
            detailsTable.style.margin = '20px auto';
            detailsTable.style.borderCollapse = 'collapse';

            const headerRow = document.createElement('tr');
            headerRow.innerHTML = '<th>型号</th><th>销量</th><th>销售额</th>';
            detailsTable.appendChild(headerRow);

            data[platformName].models.forEach(model => {
                const modelRow = document.createElement('tr');
                modelRow.innerHTML = `<td>${model.model}</td><td>${model.sales}</td><td>${model.revenue}</td>`;
                detailsTable.appendChild(modelRow);
            });

            summaryTableBody.parentNode.insertBefore(detailsTable, summaryTableBody.nextSibling);
        } else {
            detailsRow.classList.toggle('hidden');
        }
    }
</script>

</body>
</html>
